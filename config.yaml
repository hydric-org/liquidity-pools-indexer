# yaml-language-server: $schema=./node_modules/envio/evm.schema.json

name: Zup DEXs Indexer
description: This is the primary indexer used by the Zup Protocol to calculate yields. It aggregates data from all protocols supported by Zup across different networks. For each network, it includes all Zup-supported DEXs in a single indexer.
contracts:
  - name: UniswapV2Factory
    abi_file_path: ./abis/factories/UniswapV2Factory.json
    handler: ./src/handlers/v2-handlers/factory/uniswap-v2-factory-handler.ts
    events:
      - event: PairCreated(address indexed token0, address indexed token1, address pair, uint256)

  - name: UniswapV2Pool
    abi_file_path: ./abis/pools/UniswapV2Pool.json
    handler: ./src/handlers/v2-handlers/pool/uniswap/index.ts
    events:
      - event: Mint(address indexed sender, uint256 amount0, uint256 amount1)
      - event: Burn(address indexed sender, uint256 amount0, uint256 amount1, address indexed to)
      - event: Swap(address indexed sender, uint256 amount0In, uint256 amount1In, uint256 amount0Out, uint256 amount1Out, address indexed to)
      - event: Sync(uint112 reserve0, uint112 reserve1)

  - name: UniswapV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/uniswap-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: PinotFinanceV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/pinot-finance-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: CapricornCLFactory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/capricorn-cl-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: HoneyPopV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/honeypop-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: HyperSwapV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/hyperswap-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: HybraV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/hybra-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: ProjectXV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/projectx-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: KittenSwapAlgebraFactory
    abi_file_path: ./abis/factories/AlgebraFactory_1_2_2.json
    handler: ./src/handlers/algebra-handlers/factory/kittenswap-algebra-factory-handler.ts
    events:
      - event: Pool(address indexed token0, address indexed token1, address pool)
      - event: CustomPool(address indexed deployer, address indexed token0, address indexed token1, address pool)

  - name: AtlantisAlgebraFactory
    abi_file_path: ./abis/factories/AlgebraFactory_1_2_2.json
    handler: ./src/handlers/algebra-handlers/factory/atlantis-algebra-factory-handler.ts
    events:
      - event: Pool(address indexed token0, address indexed token1, address pool)
      - event: CustomPool(address indexed deployer, address indexed token0, address indexed token1, address pool)

  - name: AethonSwapAlgebraFactory
    abi_file_path: ./abis/factories/AlgebraFactory_1_2_0.json
    handler: ./src/handlers/algebra-handlers/factory/aethonswap-algebra-factory-handler.ts
    events:
      - event: Pool(address indexed token0, address indexed token1, address pool)
      - event: CustomPool(address indexed deployer, address indexed token0, address indexed token1, address pool)

  - name: AlgebraPool_1_2_0
    abi_file_path: ./abis/pools/AlgebraPool_1_2_0.json
    handler: ./src/handlers/algebra-handlers/pool/v1.2.0/index.ts
    events:
      - event: Mint(address sender, address indexed owner, int24 indexed bottomTick, int24 indexed topTick, uint128 liquidityAmount, uint256 amount0, uint256 amount1)
      - event: Initialize(uint160 price, int24 tick)
      - event: Collect(address indexed owner, address recipient, int24 indexed bottomTick, int24 indexed topTick, uint128 amount0, uint128 amount1)
      - event: Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 price, uint128 liquidity, int24 tick, uint24 overrideFee, uint24 pluginFee)
      - event: Fee(uint16 fee)
      - event: TickSpacing(int24 newTickSpacing)
      - event: CommunityFee(uint16 communityFeeNew)
      - event: Burn(address indexed owner, int24 indexed bottomTick, int24 indexed topTick, uint128 liquidityAmount, uint256 amount0, uint256 amount1, uint24 pluginFee)
      - event: Plugin(address newPluginAddress)
        name: PluginEvent
      - event: PluginConfig(uint8 newPluginConfig)
      - event: ExcessTokens(uint256 amount0, uint256 amount1)

  - name: AlgebraPool_1_2_2
    abi_file_path: ./abis/pools/AlgebraPool_1_2_2.json
    handler: ./src/handlers/algebra-handlers/pool/v1.2.2/index.ts
    events:
      - event: Mint(address sender, address indexed owner, int24 indexed bottomTick, int24 indexed topTick, uint128 liquidityAmount, uint256 amount0, uint256 amount1)
      - event: Initialize(uint160 price, int24 tick)
      - event: Collect(address indexed owner, address recipient, int24 indexed bottomTick, int24 indexed topTick, uint128 amount0, uint128 amount1)
      - event: Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 price, uint128 liquidity, int24 tick)
      - event: Fee(uint16 fee)
      - event: TickSpacing(int24 newTickSpacing)
      - event: SwapFee(address indexed sender, uint24 overrideFee, uint24 pluginFee)
      - event: CommunityFee(uint16 communityFeeNew)
      - event: Burn(address indexed owner, int24 indexed bottomTick, int24 indexed topTick, uint128 liquidityAmount, uint256 amount0, uint256 amount1)
      - event: Plugin(address newPluginAddress)
        name: PluginEvent
      - event: PluginConfig(uint8 newPluginConfig)
      - event: ExcessTokens(uint256 amount0, uint256 amount1)

  - name: UniswapV3Pool
    abi_file_path: ./abis/pools/UniswapV3Pool.json
    handler: ./src/handlers/v3-handlers/pool/uniswap/index.ts
    events:
      - event: Initialize(uint160 sqrtPriceX96, int24 tick)
      - event: Mint(address sender, address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: Collect(address indexed owner, address recipient, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount0, uint128 amount1)
      - event: Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)
      - event: CollectProtocol(address indexed sender, address indexed recipient, uint128 amount0, uint128 amount1)
      - event: Burn(address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)

  - name: AerodromeSlipstreamFactory
    abi_file_path: ./abis/factories/SlipstreamFactory.json
    handler: ./src/handlers/slipstream-handlers/factory/aerodrome-slipstream-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, int24 indexed tickSpacing, address pool)

  - name: HybraSlipstreamFactory
    abi_file_path: ./abis/factories/SlipstreamFactory.json
    handler: ./src/handlers/slipstream-handlers/factory/hybra-slipstream-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, int24 indexed tickSpacing, address pool)

  - name: VelodromeSlipstreamFactory
    abi_file_path: ./abis/factories/SlipstreamFactory.json
    handler: ./src/handlers/slipstream-handlers/factory/velodrome-slipstream-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, int24 indexed tickSpacing, address pool)

  - name: SlipstreamPool
    abi_file_path: ./abis/pools/SlipstreamPool.json
    handler: ./src/handlers/slipstream-handlers/pool/index.ts
    events:
      - event: Mint(address sender, address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: Collect(address indexed owner, address recipient, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount0, uint128 amount1)
      - event: Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)
      - event: CollectFees(address indexed recipient, uint128 amount0, uint128 amount1)
      - event: Burn(address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: Initialize(uint160 sqrtPriceX96, int24 tick)

  - name: AlienBaseV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/alienbase-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: OctoSwapCLFactory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/octoswap-cl-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: OkuV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/oku-trade-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: PancakeSwapV3Factory
    abi_file_path: ./abis/factories/PancakeSwapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/pancakeswap-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: PancakeSwapV3Pool
    abi_file_path: ./abis/pools/PancakeSwapV3Pool.json
    handler: ./src/handlers/v3-handlers/pool/pancakeswap/index.ts
    events:
      - event: Mint(address sender, address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: Initialize(uint160 sqrtPriceX96, int24 tick)
      - event: Collect(address indexed owner, address recipient, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount0, uint128 amount1)
      - event: Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick, uint128 protocolFeesToken0, uint128 protocolFeesToken1)
      - event: CollectProtocol(address indexed sender, address indexed recipient, uint128 amount0, uint128 amount1)
      - event: Burn(address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)

  - name: RamsesV3Pool
    abi_file_path: ./abis/pools/RamsesV3Pool.json
    handler: ./src/handlers/v3-handlers/pool/ramses/index.ts
    events:
      - event: Mint(address sender, address indexed owner, uint256 index, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: Initialize(uint160 sqrtPriceX96, int24 tick)
      - event: Collect(address indexed owner, address recipient, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount0, uint128 amount1)
      - event: Swap(address indexed sender, address indexed recipient, int256 amount0, int256 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick)
      - event: CollectProtocol(address indexed sender, address indexed recipient, uint128 amount0, uint128 amount1)
      - event: Burn(address indexed owner, int24 indexed tickLower, int24 indexed tickUpper, uint128 amount, uint256 amount0, uint256 amount1)
      - event: FeeAdjustment(uint24 oldFee, uint24 newFee)

  - name: UltrasolidV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/ultrasolid-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: UpheavalV3Factory
    abi_file_path: ./abis/factories/PancakeSwapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/upheaval-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: SushiSwapV3Factory
    abi_file_path: ./abis/factories/UniswapV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/sushi-swap-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: RamsesV3Factory
    abi_file_path: ./abis/factories/RamsesV3Factory.json
    handler: ./src/handlers/v3-handlers/factory/ramses-v3-factory-handler.ts
    events:
      - event: PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)

  - name: PancakeSwapV4CLPoolManager
    abi_file_path: ./abis/PancakeSwapV4CLPoolManager.json
    handler: ./src/handlers/v4-handlers/pancakeswap-infinity-cl/index.ts
    events:
      - event: Initialize(bytes32 indexed id, address indexed currency0, address indexed currency1, address hooks, uint24 fee, bytes32 parameters, uint160 sqrtPriceX96, int24 tick)
      - event: ModifyLiquidity(bytes32 indexed id, address indexed sender, int24 tickLower, int24 tickUpper, int256 liquidityDelta, bytes32 salt)
      - event: Swap(bytes32 indexed id, address indexed sender, int128 amount0, int128 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick, uint24 fee, uint16 protocolFee)

  - name: UniswapV4PoolManager
    abi_file_path: ./abis/UniswapV4PoolManager.json
    handler: ./src/handlers/v4-handlers/uniswap/index.ts
    events:
      - event: Initialize(bytes32 indexed id, address indexed currency0, address indexed currency1, uint24 fee, int24 tickSpacing, address hooks, uint160 sqrtPriceX96, int24 tick)
      - event: ModifyLiquidity(bytes32 indexed id, address indexed sender, int24 tickLower, int24 tickUpper, int256 liquidityDelta, bytes32 salt)
      - event: Swap(bytes32 indexed id, address indexed sender, int128 amount0, int128 amount1, uint160 sqrtPriceX96, uint128 liquidity, int24 tick, uint24 fee)

chains:
  - id: 11155111 # Ethereum Sepolia
    start_block: 3518269
    max_reorg_depth: 12
    contracts:
      - name: UniswapV3Factory
        address: 0x0227628f3F023bb0B980b67D528571c95c6DaC1c
      - name: PancakeSwapV3Factory
        address: 0x0BFbCF9fa4f9C56B0F40a671Ad40E0805A091865
      - name: UniswapV4PoolManager
        address: 0xE03A1074c86CFeDd5C142C4F04F1a1536e203543
      - name: UniswapV3Pool
      - name: PancakeSwapV3Pool
  - id: 1 # Ethereum Mainnet
    start_block: 12369621
    max_reorg_depth: 12
    contracts:
      - name: UniswapV3Factory
        address: 0x1F98431c8aD98523631AE4a59f267346ea31F984
      - name: PancakeSwapV3Factory
        address: 0x0BFbCF9fa4f9C56B0F40a671Ad40E0805A091865
      - name: SushiSwapV3Factory
        address: 0xbACEB8eC6b9355Dfc0269C18bac9d6E2Bdc29C4F
      - name: UniswapV4PoolManager
        address: "0x000000000004444c5dc75cB358380D2e3dE08A90"
      - name: PancakeSwapV3Pool
      - name: UniswapV3Pool
      - name: UniswapV2Pool
  - id: 534352 # Scroll Mainnet
    start_block: 1367
    max_reorg_depth: 5
    contracts:
      - name: SushiSwapV3Factory
        address: 0x46B3fDF7b5CDe91Ac049936bF0bDb12c5d22202e
      - name: HoneyPopV3Factory
        address: 0x1d25AF2b0992bf227b350860Ea80Bad47382CAf6
      - name: UniswapV3Pool
  - id: 130 # Unichain
    start_block: 0
    max_reorg_depth: 200
    contracts:
      - name: UniswapV4PoolManager
        address: 0x1f98400000000000000000000000000000000004
      - name: UniswapV3Factory
        address: 0x1f98400000000000000000000000000000000003
      - name: VelodromeSlipstreamFactory
        address: 0x04625B046C69577EfC40e6c0Bb83CDBAfab5a55F
      - name: UniswapV3Pool
      - name: SlipstreamPool
  - id: 999 # HyperEVM
    start_block: 11648
    max_reorg_depth: 6
    contracts:
      - name: HyperSwapV3Factory
        address: 0xB1c0fa0B789320044A6F623cFe5eBda9562602E3
      - name: ProjectXV3Factory
        address: 0xFf7B3e8C00e57ea31477c32A5B52a58Eea47b072
      - name: HybraV3Factory
        address: 0x2dC0Ec0F0db8bAF250eCccF268D7dFbF59346E5E
      - name: KittenSwapAlgebraFactory
        address: 0x5f95E92c338e6453111Fc55ee66D4AafccE661A7
      - name: UltrasolidV3Factory
        address: 0xD883a0B7889475d362CEA8fDf588266a3da554A1
      - name: UpheavalV3Factory
        address: 0x2566163ea012C9E67c1C7080e0a073f20B548030
      - name: RamsesV3Factory
        address: 0x07E60782535752be279929e2DFfDd136Db2e6b45
      - name: HybraSlipstreamFactory
        address: 0x32b9dA73215255d50D84FeB51540B75acC1324c2
      - name: UniswapV3Pool
      - name: AlgebraPool_1_2_0
      - name: AlgebraPool_1_2_2
      - name: PancakeSwapV3Pool
      - name: RamsesV3Pool
      - name: SlipstreamPool
  - id: 8453 # Base
    start_block: 1371680
    max_reorg_depth: 200
    contracts:
      - name: AerodromeSlipstreamFactory
        address: 0x5e7BB104d84c7CB9B682AaC2F3d509f5F406809A
      - name: UniswapV3Factory
        address: 0x33128a8fC17869897dcE68Ed026d694621f6FDfD
      - name: PancakeSwapV3Factory
        address: 0x0BFbCF9fa4f9C56B0F40a671Ad40E0805A091865
      - name: SushiSwapV3Factory
        address: 0xc35DADB65012eC5796536bD9864eD8773aBc74C4
      - name: AlienBaseV3Factory
        address: 0x0Fd83557b2be93617c9C1C1B6fd549401C74558C
      - name: UniswapV4PoolManager
        address: 0x498581fF718922c3f8e6A244956aF099B2652b2b
      - name: PancakeSwapV4CLPoolManager
        address: 0xa0FfB9c1CE1Fe56963B0321B32E7A0302114058b
      - name: SlipstreamPool
      - name: UniswapV3Pool
      - name: PancakeSwapV3Pool
  - id: 9745 # Plasma
    start_block: 430127
    max_reorg_depth: 180
    contracts:
      - name: OkuV3Factory
        address: 0xcb2436774C3e191c85056d248EF4260ce5f27A9D
      - name: UniswapV3Pool
  - id: 143 # Monad
    start_block: 23058782
    max_reorg_depth: 200
    contracts:
      - name: UniswapV3Factory
        address: 0x204faca1764b154221e35c0d20abb3c525710498
      - name: UniswapV4PoolManager
        address: 0x188d586Ddcf52439676Ca21A244753fA19F9Ea8e
      - name: PancakeSwapV3Factory
        address: 0x0BFbCF9fa4f9C56B0F40a671Ad40E0805A091865
      - name: AethonSwapAlgebraFactory
        address: 0x05aA1d36F78D1242C40b3680d38EB1feE7060c20
      - name: AtlantisAlgebraFactory
        address: 0x10253594A832f967994b44f33411940533302ACb
      - name: OctoSwapCLFactory
        address: 0x30Db57A29ACf3641dfc3885AF2e5f1F5A408D9CB
      - name: PinotFinanceV3Factory
        address: 0x7716F310d62Aee3d009fd94067c627fe7E2f2aA9
      - name: CapricornCLFactory
        address: 0x6B5F564339DbAD6b780249827f2198a841FEB7F3
      - name: UniswapV3Pool
      - name: PancakeSwapV3Pool
      - name: AlgebraPool_1_2_0
      - name: AlgebraPool_1_2_2

rollback_on_reorg: true
address_format: lowercase
