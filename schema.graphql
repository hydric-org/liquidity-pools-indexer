enum PoolType {
  V2
  V3
  V4
  ALGEBRA
}

type DeFiPoolData {
  id: ID!
  poolsCount: Int!
  startedAtTimestamp: BigInt! @config(precision: 12)
}

type DeFiPoolDailyData {
  id: ID!
  liquidityVolumeUSD: BigDecimal!
  liquidityNetInflowUSD: BigDecimal!
  liquidityInflowUSD: BigDecimal!
  liquidityOutflowUSD: BigDecimal!
  dayStartTimestamp: BigInt! @index @config(precision: 12)
}

type DeFiPoolHourlyData {
  id: ID!
  liquidityVolumeUSD: BigDecimal!
  liquidityNetInflowUSD: BigDecimal!
  liquidityInflowUSD: BigDecimal!
  liquidityOutflowUSD: BigDecimal!
  hourStartTimestamp: BigInt! @index @config(precision: 12)
}

type Token {
  id: ID!
  tokenAddress: String! @index
  usdPrice: BigDecimal!
  mostLiquidPool: Pool!
  decimals: Int!
  totalValuePooledUsd: BigDecimal! @index
  #  @config(precision: 20, scale: 6)
  totalTokenPooledAmount: BigDecimal!
  swapVolumeUSD: BigDecimal! @index
  tokenSwapVolume: BigDecimal!
  liquidityVolumeUSD: BigDecimal! @index
  tokenLiquidityVolume: BigDecimal!
  symbol: String!
  name: String!
  chainId: Int! @index
}

type Pool @index(fields: ["token0", "token1", "totalValueLockedUSD"]) {
  id: ID!
  token0: Token! @index
  token1: Token! @index
  poolAddress: String! @index
  currentFeeTier: Int!
  initialFeeTier: Int!
  positionManager: Bytes!
  totalValueLockedUSD: BigDecimal! @index
  # @config(precision: 19, scale: 6)
  totalValueLockedToken0: BigDecimal!
  totalValueLockedToken1: BigDecimal!
  swapVolumeUSD: BigDecimal!
  swapVolumeToken0: BigDecimal!
  swapVolumeToken1: BigDecimal!
  liquidityVolumeUSD: BigDecimal!
  liquidityVolumeToken0: BigDecimal!
  liquidityVolumeToken1: BigDecimal!
  createdAtTimestamp: BigInt! @index @config(precision: 12)
  hourlyData: [PoolHourlyData!]! @derivedFrom(field: "pool")
  dailyData: [PoolDailyData!]! @derivedFrom(field: "pool")
  protocol: Protocol! @index
  poolType: PoolType! @index
  v4PoolData: V4PoolData
  v3PoolData: V3PoolData
  algebraPoolData: AlgebraPoolData
  chainId: Int! @index
  isDynamicFee: Boolean!
  totalAccumulatedYield: BigDecimal! @config(precision: 18, scale: 6)
  totalAccumulatedYield24hAgo: BigDecimal! @config(precision: 18, scale: 6)
  totalAccumulatedYield7dAgo: BigDecimal! @config(precision: 18, scale: 6)
  totalAccumulatedYield30dAgo: BigDecimal! @config(precision: 18, scale: 6)
  totalAccumulatedYield90dAgo: BigDecimal! @config(precision: 18, scale: 6)
  accumulatedYield24h: BigDecimal! @config(precision: 18, scale: 6)
  accumulatedYield7d: BigDecimal! @config(precision: 18, scale: 6)
  accumulatedYield30d: BigDecimal! @config(precision: 18, scale: 6)
  accumulatedYield90d: BigDecimal! @config(precision: 18, scale: 6)
  yearlyYield90d: BigDecimal! @config(precision: 18, scale: 6)
  yearlyYield30d: BigDecimal! @config(precision: 18, scale: 6)
  yearlyYield7d: BigDecimal! @config(precision: 18, scale: 6)
  yearlyYield24h: BigDecimal! @config(precision: 18, scale: 6)
  lastAdjustTimestamp24h: BigInt @config(precision: 12)
  lastAdjustTimestamp7d: BigInt @config(precision: 12)
  lastAdjustTimestamp30d: BigInt @config(precision: 12)
  lastAdjustTimestamp90d: BigInt @config(precision: 12)
  dataPointTimestamp24hAgo: BigInt! @index @config(precision: 12)
  dataPointTimestamp7dAgo: BigInt! @index @config(precision: 12)
  dataPointTimestamp30dAgo: BigInt! @index @config(precision: 12)
  dataPointTimestamp90dAgo: BigInt! @index @config(precision: 12)
}

type V3PoolData {
  id: ID!
  tick: BigInt! @config(precision: 7)
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
}

type V4PoolData {
  id: ID!
  hooks: Bytes!
  tick: BigInt! @config(precision: 7)
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
  permit2: Bytes!
  poolManager: Bytes!
  stateView: Bytes
}

type AlgebraPoolData {
  id: ID!
  deployer: String!
  communityFee: Int!
  plugin: String!
  pluginConfig: Int!
  version: String!
  tick: BigInt! @config(precision: 7)
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
}

type PoolHourlyData @index(fields: ["hourStartTimestamp", "totalValueLockedUSD"]) {
  id: ID!
  pool: Pool!
  totalAccumulatedYield: BigDecimal!
  # @config(precision: 18, scale: 6)
  yearlyYield: BigDecimal!
  # @config(precision: 15, scale: 6)
  feesUSD: BigDecimal! @index
  # @config(precision: 17, scale: 6)
  feesToken0: BigDecimal!
  feesToken1: BigDecimal!
  hourStartTimestamp: BigInt! @index
  # @config(precision: 12)
  totalValueLockedUSD: BigDecimal! @index
  #  @config(precision: 19, scale: 6)
  totalValueLockedToken0: BigDecimal!
  totalValueLockedToken1: BigDecimal!
  swapVolumeToken0: BigDecimal!
  swapVolumeToken1: BigDecimal!
  swapVolumeUSD: BigDecimal!
  # @config(precision: 20, scale: 6)
  liquidityVolumeUSD: BigDecimal!
  # @config(precision: 19, scale: 6)
  liquidityVolumeToken0: BigDecimal!
  liquidityVolumeToken1: BigDecimal!
  liquidityNetInflowUSD: BigDecimal!
  # @config(precision: 19, scale: 6)
  liquidityNetInflowToken0: BigDecimal!
  liquidityNetInflowToken1: BigDecimal!
  liquidityInflowUSD: BigDecimal!
  # @config(precision: 19, scale: 6)
  liquidityInflowToken0: BigDecimal!
  liquidityInflowToken1: BigDecimal!
  liquidityOutflowUSD: BigDecimal!
  #  @config(precision: 19, scale: 6)
  liquidityOutflowToken0: BigDecimal!
  liquidityOutflowToken1: BigDecimal!
}

type PoolDailyData @index(fields: ["dayStartTimestamp", "totalValueLockedUSD"]) {
  id: ID!
  pool: Pool!
  totalAccumulatedYield: BigDecimal!
  # @config(precision: 18, scale: 6)
  yearlyYield: BigDecimal!
  #  @config(precision: 15, scale: 6)
  feesUSD: BigDecimal! @index
  #  @config(precision: 18, scale: 6)
  feesToken0: BigDecimal!
  feesToken1: BigDecimal!
  dayStartTimestamp: BigInt! @index
  #  @config(precision: 12)
  totalValueLockedUSD: BigDecimal! @index
  # @config(precision: 19, scale: 6)
  totalValueLockedToken0: BigDecimal!
  totalValueLockedToken1: BigDecimal!
  swapVolumeToken0: BigDecimal!
  swapVolumeToken1: BigDecimal!
  swapVolumeUSD: BigDecimal!
  #  @config(precision: 20, scale: 6)
  liquidityVolumeUSD: BigDecimal!
  #  @config(precision: 19, scale: 6)
  liquidityVolumeToken0: BigDecimal!
  liquidityVolumeToken1: BigDecimal!
  liquidityNetInflowUSD: BigDecimal!
  #  @config(precision: 18, scale: 6)
  liquidityNetInflowToken0: BigDecimal!
  liquidityNetInflowToken1: BigDecimal!
  liquidityInflowUSD: BigDecimal!
  #  @config(precision: 19, scale: 6)
  liquidityInflowToken0: BigDecimal!
  liquidityInflowToken1: BigDecimal!
  liquidityOutflowUSD: BigDecimal!
  #  @config(precision: 19, scale: 6)
  liquidityOutflowToken0: BigDecimal!
  liquidityOutflowToken1: BigDecimal!
}

type Protocol {
  id: String!
  name: String!
  logo: String!
  url: String!
  pools: [Pool!]! @derivedFrom(field: "protocol")
}
