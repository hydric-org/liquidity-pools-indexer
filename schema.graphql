enum PoolType {
  V2
  V3
  V4
  ALGEBRA
  SLIPSTREAM
}

enum HistoricalDataInterval {
  HOURLY
  DAILY
}

enum StatsTimeframe {
  DAY
  WEEK
  MONTH
  QUARTER
}

type Token {
  id: ID!
  tokenAddress: String! @index
  usdPrice: BigDecimal!
  decimals: Int!
  totalValuePooledUsd: BigDecimal! @index
  tokenTotalValuePooled: BigDecimal!
  swapVolumeUsd: BigDecimal! @index
  tokenSwapVolume: BigDecimal!
  liquidityVolumeUsd: BigDecimal! @index
  tokenLiquidityVolume: BigDecimal!
  tokenFees: BigDecimal!
  feesUsd: BigDecimal!
  symbol: String!
  name: String!
  chainId: Int! @index
  poolsCount: Int!
  swapsCount: Int!
  swapsInCount: Int!
  swapsOutCount: Int!
}

type Pool @index(fields: ["token0", "token1", "totalValueLockedUsd"]) {
  id: ID!
  token0: Token! @index
  token1: Token! @index
  poolAddress: String! @index
  currentFeeTier: Int!
  initialFeeTier: Int!
  positionManager: Bytes!
  protocol: Protocol! @index
  poolType: PoolType! @index
  v4PoolData: V4PoolData
  v3PoolData: V3PoolData
  algebraPoolData: AlgebraPoolData
  slipstreamPoolData: SlipstreamPoolData
  chainId: Int! @index
  isDynamicFee: Boolean!
  createdAtTimestamp: BigInt! @index @config(precision: 12)
  historicalData: [PoolHistoricalData!]! @derivedFrom(field: "pool")
  #  @config(precision: 8, scale: 6)
  totalValueLockedUsd: BigDecimal! @index
  totalValueLockedToken0: BigDecimal!
  totalValueLockedToken1: BigDecimal!
  totalValueLockedToken0Usd: BigDecimal!
  totalValueLockedToken1Usd: BigDecimal!
  accumulatedYield: BigDecimal! @config(precision: 18, scale: 6)
  feesUsd: BigDecimal!
  feesToken0: BigDecimal!
  feesToken1: BigDecimal!
  swapVolumeUsd: BigDecimal!
  swapVolumeToken0: BigDecimal!
  swapVolumeToken1: BigDecimal!
  swapVolumeToken0Usd: BigDecimal!
  swapVolumeToken1Usd: BigDecimal!
  liquidityVolumeUsd: BigDecimal!
  liquidityVolumeToken0: BigDecimal!
  liquidityVolumeToken1: BigDecimal!
  liquidityVolumeToken0Usd: BigDecimal!
  liquidityVolumeToken1Usd: BigDecimal!
  liquidityNetInflowUsd: BigDecimal!
  totalStats24h: PoolTimeframedStats!
  totalStats7d: PoolTimeframedStats!
  totalStats30d: PoolTimeframedStats!
  totalStats90d: PoolTimeframedStats!
  swapsCount: Int!
  tokens0PerToken1: BigDecimal!
  tokens1PerToken0: BigDecimal!
}

type V3PoolData {
  id: ID!
  tick: BigInt! @config(precision: 7)
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
}

type SlipstreamPoolData {
  id: ID!
  tick: BigInt! @config(precision: 7)
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
  lastFeeAdjustmentTimestamp: BigInt! @config(precision: 12)
}

type AlgebraPoolData {
  id: ID!
  deployer: String!
  communityFee: Int!
  plugin: String!
  pluginConfig: Int!
  version: String!
  tick: BigInt! @config(precision: 7)
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
}

type V4PoolData {
  id: ID!
  hooks: Bytes!
  tick: BigInt! @config(precision: 7)
  sqrtPriceX96: BigInt!
  tickSpacing: Int!
  permit2: Bytes!
  poolManager: Bytes!
  stateView: Bytes
}

type PoolTimeframedStats {
  id: ID!
  pool: Pool! @index
  timeframe: StatsTimeframe!
  dataPointTimestamp: BigInt! @index @config(precision: 12)
  lastRefreshTimestamp: BigInt! @config(precision: 12)
  liquidityNetInflowUsd: BigDecimal!
  swapVolumeUsd: BigDecimal!
  feesUsd: BigDecimal!
  yearlyYield: BigDecimal! @config(precision: 18, scale: 6)
  accumulatedYield: BigDecimal! @config(precision: 18, scale: 6)
}

type PoolHistoricalData {
  id: ID!
  pool: Pool!
  interval: HistoricalDataInterval!
  timestampAtStart: BigInt! @index @config(precision: 12)
  timestampAtEnd: BigInt! @config(precision: 12)
  accumulatedYieldAtStart: BigDecimal! @config(precision: 18, scale: 6)
  accumulatedYieldAtEnd: BigDecimal! @config(precision: 18, scale: 6)
  feesUsdAtStart: BigDecimal!
  feesUsdAtEnd: BigDecimal!
  swapVolumeUsdAtStart: BigDecimal!
  swapVolumeUsdAtEnd: BigDecimal!
  liquidityNetInflowUsdAtStart: BigDecimal!
  liquidityNetInflowUsdAtEnd: BigDecimal!
  totalValueLockedUsdAtStart: BigDecimal!
  totalValueLockedUsdAtEnd: BigDecimal!
  totalValueLockedToken0AtStart: BigDecimal!
  totalValueLockedToken0AtEnd: BigDecimal!
  totalValueLockedToken1AtStart: BigDecimal!
  totalValueLockedToken1AtEnd: BigDecimal!
  intervalSwapVolumeToken0: BigDecimal!
  intervalSwapVolumeToken1: BigDecimal!
  intervalSwapVolumeUsd: BigDecimal!
  intervalLiquidityVolumeUsd: BigDecimal!
  intervalLiquidityVolumeToken0: BigDecimal!
  intervalLiquidityVolumeToken1: BigDecimal!
  intervalLiquidityNetInflowUsd: BigDecimal!
  intervalLiquidityNetInflowToken0: BigDecimal!
  intervalLiquidityNetInflowToken1: BigDecimal!
  intervalLiquidityInflowUsd: BigDecimal!
  intervalLiquidityInflowToken0: BigDecimal!
  intervalLiquidityInflowToken1: BigDecimal!
  intervalLiquidityOutflowUsd: BigDecimal!
  intervalLiquidityOutflowToken0: BigDecimal!
  intervalLiquidityOutflowToken1: BigDecimal!
  intervalFeesUsd: BigDecimal!
  intervalFeesToken0: BigDecimal!
  intervalFeesToken1: BigDecimal!
}

type Protocol {
  id: String!
  name: String!
  logo: String!
  url: String!
  pools: [Pool!]! @derivedFrom(field: "protocol")
}
